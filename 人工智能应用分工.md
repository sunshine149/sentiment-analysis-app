# 📋 **四人小组详细分工方案**

## 🧑‍💼 **一、组长李平平（项目架构师/技术负责人）**

### **核心职责**：系统整体架构、主训练流程、前端框架设计

### ✅ **负责的具体代码模块**：

#### **1. 主训练流程（`app.py`）**
```python
def train_model_incremental(use_gpu=False, epochs=5, batch_size=32, model_type='sgd_tfidf'):
    """增量训练模型（支持多种模型类型）- 核心函数"""
    # 主要实现：完整的训练流程控制
    
def train_initial_model():
    """训练初始模型"""
    # 实现基础模型的训练逻辑
```

#### **2. 模型管理核心（`app.py`）**
```python
def backup_model():
    """备份当前模型"""
    
def restore_backup():
    """恢复备份的模型"""
    
def load_latest_model():
    """加载最新的模型"""
```

#### **3. GPU支持与优化（`app.py`）**
```python
def check_gpu():
    """检查GPU是否可用"""
    
@app.route('/api/train_options', methods=['GET'])
def train_options():
    """获取训练选项"""
```

#### **4. 前端架构设计（HTML/CSS/JS）**
- **`index.html`**：整体页面结构布局
  - 主容器 `.container` 设计
  - 双栏布局 `.left-column` / `.right-column`
  - 面板结构 `.panel` 规划
- **`style.css`**：全局样式框架
  - 基础样式 `* {}`, `body {}`
  - 响应式媒体查询设计
- **`main.js`**：核心交互逻辑框架
  - `initializeApp()` 函数设计
  - 全局变量定义架构

#### **5. 系统集成接口（`app.py`）**
```python
@app.route('/health', methods=['GET'])
def health():
    """健康检查接口"""
    
@app.route('/api/verify_dataset', methods=['GET'])
def verify_dataset():
    """验证数据集"""
```

### 📊 **具体产出物**：
1. 系统架构设计图
2. 训练流程时序图
3. 前端UI框架设计稿
4. 集成测试报告

---

## 👩‍💻 **二、组员A尹洛乐（前端开发/数据处理）**

### **核心职责**：前端界面实现、数据预处理、用户交互

### ✅ **负责的具体代码模块**：

#### **1. 数据预处理函数（`app.py`）**
```python
def preprocess_text(text):
    """文本预处理函数"""
    # 使用jieba分词处理中文文本
    
def remove_duplicate_feedback(df):
    """统一去除重复反馈，确保前后端数据一致"""
    # 核心去重逻辑实现
```

#### **2. 反馈数据管理（`app.py`）**
```python
def count_all_feedback(unique_only=True):
    """统计所有反馈数据"""
    
def count_valid_feedback(unique_only=True):
    """统计有效反馈数据（仅符合和不符合）"""
```

#### **3. 前端样式实现（`style.css`）**
- **面板样式系统**
  - `.panel {}` 所有面板基础样式
  - `.panel:hover {}` 悬停效果
  - `.panel h2 {}` 面板标题样式
- **表单组件样式**
  - `textarea {}` 文本输入框样式
  - `.form-group {}` 表单组样式
  - `.button-group {}` 按钮组样式
- **结果展示样式**
  - `.result-item {}` 结果项样式
  - `.sentiment {}` 情感标签样式
  - `.confidence-bar {}` 置信度条样式

#### **4. JavaScript交互实现（`main.js`）**
```javascript
// 文本分析相关函数
function analyzeText() {
    // 实现文本分析请求
}

function displayResult(data) {
    // 展示分析结果
}

function updateCharCount() {
    // 更新字符计数
}

// 图表控制函数
function toggleCharts() {
    // 切换图表显示
}

function exportCharts() {
    // 导出图表功能
}
```

#### **5. 图表集成（`main.js`）**
```javascript
function createModelComparisonChart(chartData, modelTypesData) {
    // 创建模型对比图表
}

function createAccuracyTrendChart(chartData) {
    // 创建准确率趋势图表
}

function createLossTrendChart(chartData) {
    // 创建损失曲线图表
}

function createFeedbackGrowthChart(chartData) {
    // 创建反馈增长图表
}
```

### 📊 **具体产出物**：
1. 完整的前端界面实现
2. 数据预处理流程图
3. 交互设计说明文档
4. 图表可视化效果展示

---

## 👨‍💻 **三、组员B李钥晴（算法工程师/反馈系统）**

### **核心职责**：反馈阈值机制、多模型实现、API接口

### ✅ **负责的具体代码模块**：

#### **1. 反馈阈值触发机制（`app.py`）**
```python
# 全局变量定义
TRAINING_TRIGGER_THRESHOLD = 10  # 触发训练的阈值
current_feedback_threshold = 0    # 当前反馈阈值
last_training_feedback_count = 0  # 上次训练时的反馈数量

@app.route('/api/session_end', methods=['POST'])
def session_end():
    """页面关闭时触发训练（满足阈值条件才触发）"""
    # 核心实现：自动训练触发逻辑
    
def save_threshold_info():
    """保存阈值信息到文件"""
    
def load_threshold_info():
    """加载阈值信息"""
```

#### **2. 多模型类型实现（`app.py`）**
```python
# 在 train_model_incremental 函数中：
if model_type == 'sgd_tfidf':
    model = SGDClassifier(...)
elif model_type == 'random_forest':
    model = RandomForestClassifier(...)
elif model_type == 'svm_tfidf':
    model = SVC(...)
elif model_type == 'logistic_regression':
    model = LogisticRegression(...)
```

#### **3. 模型切换与历史（`app.py`）**
```python
def switch_to_model(model_name):
    """切换到指定模型"""
    
def list_available_models():
    """列出所有可用的模型"""
    
def generate_comparison_charts():
    """生成模型对比和训练历史图表"""
```

#### **4. 模型类型API（`app.py`）**
```python
@app.route('/api/model_types', methods=['GET'])
def get_model_types():
    """获取可用的模型类型"""
    
@app.route('/api/training_history', methods=['GET'])
def get_training_history():
    """获取训练历史数据（用于前端图表）"""
```

#### **5. 模型信息API（`app.py`）**
```python
def get_model_info():
    """获取当前模型信息"""
    
@app.route('/api/model_info', methods=['GET'])
def api_model_info():
    """获取当前模型信息"""
```

#### **6. JavaScript模型控制（`main.js`）**
```javascript
// 模型类型管理
function loadModelTypes() {
    // 加载模型类型信息
}

function updateModelDescription(modelType) {
    // 更新模型描述
}

// 训练控制
function startTraining() {
    // 开始训练（支持多模型类型）
}

function checkTrainingStatus() {
    // 检查训练状态
}
```

### 📊 **具体产出物**：
1. 反馈阈值机制设计文档
2. 多模型性能对比报告
3. API接口文档
4. 模型切换流程图

---

## 👩‍🏫 **四、组员C罗雨涵（文档工程师/测试部署）**

### **核心职责**：项目文档、测试用例、部署配置、PPT制作

### ✅ **负责的具体内容**：

#### **1. 项目配置文件**
- **`requirements.txt`**：完整依赖包列表
- **`config.py`**：配置文件优化与注释
```python
# MODEL_CONFIG 配置优化
# MODEL_TYPES 配置完善
# TRAINING_CONFIG 参数调整
```

#### **2. 测试用例编写**
- **API测试脚本**（新建 `test_api.py`）
```python
def test_predict_api():
    """测试预测API"""
    
def test_feedback_api():
    """测试反馈API"""
    
def test_training_api():
    """测试训练API"""
```

- **模型测试脚本**（新建 `test_models.py`）
```python
def test_all_model_types():
    """测试所有模型类型"""
    
def test_threshold_mechanism():
    """测试阈值触发机制"""
```

#### **3. 部署配置文档**
- **部署指南**（新建 `DEPLOYMENT.md`）
- **环境配置脚本**（新建 `setup.sh`）
- **Docker配置**（新建 `Dockerfile` 和 `docker-compose.yml`）

#### **4. 项目结构文档**
- **目录结构说明**（新建 `PROJECT_STRUCTURE.md`）
```
sentiment-analysis-app/
├── app.py              # 主程序
├── config.py           # 配置文件
├── requirements.txt    # 依赖包
├── data/              # 数据目录
├── models/            # 模型目录
├── static/            # 静态文件
├── templates/         # 模板文件
└── logs/              # 日志目录
```

#### **5. 大作业报告撰写**
- **第一章：项目概述**
- **第二章：需求分析**
- **第三章：系统设计**（与技术负责人协作）
- **第四章：实现细节**
- **第五章：测试与结果**
- **第六章：总结与展望**

#### **6. 答辩PPT制作**
- **幻灯片1**：项目背景与意义
- **幻灯片2**：系统架构图
- **幻灯片3**：核心功能演示
- **幻灯片4**：技术实现亮点
- **幻灯片5**：多模型对比结果
- **幻灯片6**：项目总结与展望

#### **7. 用户手册编写**
- **快速开始指南**
- **API使用说明**
- **故障排除指南**

### 📊 **具体产出物**：
1. 完整的大作业报告（Word/PDF）
2. 答辩PPT（15-20页）
3. 测试报告文档
4. 部署配置指南
5. 用户手册

---

## 📊 **各文件分工映射表**

| 文件 | 组长 | 组员A | 组员B | 组员C |
|------|------|-------|-------|-------|
| `app.py` | 40% | 25% | 35% | 0% |
| `config.py` | 20% | 10% | 10% | 60% |
| `requirements.txt` | 0% | 0% | 0% | 100% |
| `index.html` | 50% | 50% | 0% | 0% |
| `style.css` | 30% | 70% | 0% | 0% |
| `main.js` | 40% | 40% | 20% | 0% |
| 测试脚本 | 0% | 0% | 20% | 80% |
| 文档/报告 | 20% | 0% | 10% | 70% |
| PPT | 30% | 0% | 10% | 60% |

---

## 🔄 **协作流程建议**

### **第1-2周：并行开发**
- 组长：搭建框架 + 核心训练流程
- 组员A：前端界面 + 数据预处理
- 组员B：阈值机制 + 多模型实现
- 组员C：环境配置 + 基础文档

### **第3周：集成测试**
- 组长：系统集成 + 接口联调
- 组员A：界面优化 + 交互测试
- 组员B：算法测试 + 性能优化
- 组员C：完整测试 + bug记录

### **第4周：文档完善**
- 组长：技术章节审核
- 组员A：界面截图 + 操作说明
- 组员B：算法说明 + 结果分析
- 组员C：报告撰写 + PPT制作

### **第5周：答辩准备**
- 全员：演示脚本准备
- 组长：技术问题准备
- 组员C：PPT演练

---

这个分工方案确保：
1. ✅ **每人都有核心技术任务**
2. ✅ **算法实现3人参与**（组长、A、B）
3. ✅ **前端开发2人参与**（组长、A）
4. ✅ **文档/PPT2人参与**（C主责 + 组长审核）
5. ✅ **工作量相对均衡**
6. ✅ **技能互补，覆盖全面**